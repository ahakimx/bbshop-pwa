<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> BBShop </title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.min.css" rel="stylesheet">
  <style type="text/css">
    html,
    body,
    header,
    .carousel {
      height: 60vh;
    }

    @media (max-width: 740px) {
      html,
      body,
      header,
      .carousel {
        height: 100vh;
      }
    }

    @media (min-width: 800px) and (max-width: 850px) {
      html,
      body,
      header,
      .carousel {
        height: 100vh;
      }
    }
  </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      <!-- Brand -->
      <a class="navbar-brand" href="#" target="_blank">
        <strong>BBShop</strong>
      </a>

      <!-- Collapse -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Left -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="#" target="_blank">Booking</a>
          </li> -->
          <li class="nav-item">
            <a class="nav-link" href="model.html">Model Rambut</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="produk.html">Product</a>
          </li>
        </ul>

        <!-- Right -->
        <ul class="navbar-nav nav-flex-icons">
          <li class="nav-item">
            <a href="https://www.facebook.com/" class="nav-link" target="_blank">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="https://twitter.com/" class="nav-link" target="_blank">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        </ul>

      </div>

    </div>
  </nav>
  <!-- Navbar -->


  <!--Carousel Wrapper-->
  <div id="carousel-example-1z" class="carousel slide carousel-fade" data-ride="carousel">

    <!--Indicators-->
    <ol class="carousel-indicators">
      <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
      <li data-target="#carousel-example-1z" data-slide-to="1"></li>
      <li data-target="#carousel-example-1z" data-slide-to="2"></li>
    </ol>
    <!--/.Indicators-->

    <!--Slides-->
    <div class="carousel-inner" role="listbox">

      <!--First slide-->
      <div class="carousel-item active">
        <div class="view" style="background-image: url('images/products.JPG'); background-repeat: no-repeat; background-size: cover;">

          <!-- Mask & flexbox options-->
          <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

            <!-- Content -->
            <div class="text-center white-text mx-5 wow fadeIn">
              <h1 class="mb-4">
                <strong>SELAMAT DATANG DI BBShop</strong>
              </h1>


              <p>
                <strong> Kami berdedikasi untuk menyediakan layanan Penataan rambut dan Perawatan rambut dengan harga terjangkau, dan tak
                  tertandingi <br>Yang disesuaikan untuk setiap klien dan gaya hidup mereka dalam suasana Unik serta Menarik</strong>
              </p>


            </div>
            <!-- Content -->

          </div>
          <!-- Mask & flexbox options-->

        </div>
      </div>
      <!--/First slide-->

      
    </div>
    <!--/.Slides-->

  </div>
  <!--/.Carousel Wrapper-->


  <!--Main layout-->
  <main>
    <div class="container">
  <div id="app">
    <br><br>
      <!-- <div>
        <input v-for="person, index, key in employee" v-if="index != 'id'" type="text" :placeholder="index" v-model="employee[index]">
      </div>
      <button @click="clear">clear</button>
      <button @click="add(employee)">Add data </button> -->
        <!--Section: Products v.3-->
      <!--  <button @click="add()">Add data </button>
      <section class="text-center mb-4" v-on:onload="add(employee)">
      -->
          <!--Grid row-->
          <div class="row wow fadeIn">

            <!--Grid column-->
            <div  v-for="(employee, index) in employees" class="col-lg-3 col-md-6 mb-4">

              <!--Card-->
              <div class="card">

                <!--Card image-->
                <div class="view overlay">
                  <img :src="employee.img" class="card-img-top" alt="">
                  <a>
                    <div class="mask rgba-white-slight"></div>
                  </a>
                </div>
                <!--Card image-->

                <!--Card content-->
                <div class="card-body text-center">
                  <!--Category & Title-->
                  <a href="" class="grey-text">
                    <h5>{{employee.name}}</h5>
                    <h6>Rp. {{employee.price}}</h6>
                  </a>

                </div>
                <!--Card content-->

              </div>
              <!--Card-->

            </div>
            <!--Grid column-->
          </div>
      </section>

  </div>
</div>
  <!--Footer-->
  <footer class="page-footer text-center font-small mt-4 wow fadeIn">

      <hr class="my-4">

      <!-- Social icons -->
      <div class="pb-4">
        <a href="#" target="_blank">
          <i class="fa fa-facebook mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-twitter mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-youtube mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-google-plus mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-dribbble mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-pinterest mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-github mr-3"></i>| &nbsp;&nbsp;
        </a>

        <a href="#" target="_blank">
          <i class="fa fa-codepen mr-3"></i>
        </a>
      </div>
      <!-- Social icons -->

      <!--Copyright-->
      <div class="footer-copyright py-3">
        Â© 2018 Copyright:
        <a href="#" target="_blank"> BBShop.com </a>
      </div>
      <!--/.Copyright-->

    </footer>
    <!--/.Footer-->

  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- Initializations -->
  <script type="text/javascript">
    // Animations initialization
    new WOW().init();
  </script>
  <script src="js/vue.js"></script>
  <script>
    //prefixes of implementation that we want to test
    window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;

    //prefixes of window.IDB objects
    window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;
    window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange

    if (!window.indexedDB) {
      window.alert("Your browser doesn't support a stable version of IndexedDB.")
    }

    const employeeData = [
      {
        id: 1 ,
        name: "Product One",
        img: "images/p1.jpg",
        price:"100.000"
      },
      {
        id: 2 ,
        name: "Product Two",
        img: "images/p2.jpg",
        price:"150.000"
      },
      {
        id: 3 ,
        name: "Product Three",
        img: "images/p3.jpg",
        price:"145.000"
      },
      {
        id: 4 ,
        name: "Product Four",
        img: "images/p4.jpg",
        price:"123.000"
      },
      {
        id: 5 ,
        name: "Product Five",
        img: "images/p3.jpg",
        price:"125.000"
      },
      {
        id: 6 ,
        name: "Product Six",
        img: "images/p1.jpg",
        price:"190.000"
      },
      {
        id: 7 ,
        name: "Product Seven",
        img: "images/p4.jpg",
        price:"200.000"
      },
      {
        id: 8 ,
        name: "Product Eight",
        img: "images/p2.jpg",
        price:"80.000"
      }
    ];
    var db;
    var request = window.indexedDB.open("BBShop", 1);

    request.onerror = function(event) {
      console.log("error: ");
    };

    request.onsuccess = function(event) {
      db = request.result;
      console.log("success: "+ db);
    };

    request.onupgradeneeded = function(event) {
      var db = event.target.result;
      var objectStore = db.createObjectStore("product", {keyPath: "id"});

      for (var i in employeeData) {
        objectStore.add(employeeData[i]);
      }
    }


    new Vue ({
      el: '#app',
      data(){
        return {
          employee:{
            id: null,
            name: null,
            img: 0,
            price:null,
          },
          employees: [],
          retryCount: 0,

        }
      },
      beforeMount(){
        this.add()
      },
      mounted(){
        this.add()
        this.readAll()
      },

      methods:{
        add:function() {

        },
        clear() {
          var vm = this
          var request = db.transaction(["product"], "readwrite")
          .objectStore("product")
          .clear()
          vm.employees = []
        },
        edit(employee, index) {

          var vm = this
          new Promise((resolve, reject) => {
            vm.remove(employee.id, index)
            resolve(vm.add(employee));
          });

        },
        readAll() {
          var vm = this
          try {
            vm.employees = []
            var objectStore = db.transaction("product").objectStore("product");
            if(objectStore){
              objectStore.openCursor().onsuccess = function(event) {
                var cursor = event.target.result;

                if (cursor) {
                  if(vm.employees){
                    vm.employees.push({ edit: false,  id: cursor.key , name: cursor.value.name , img:cursor.value.img, price:cursor.value.price});

                  }
                  cursor.continue();

                }
              };
            }
          }catch(e){
            vm.retryDisp()
          }
        },
        remove(id, index) {
          var vm = this
          var request =  db.transaction(["product"], "product")
          .objectStore("product")
          .delete(id);
          vm.employees.splice(index, 1)
        },
        retryDisp() {
          var vm = this
          if( ++vm.retryCount > 5 ) {
            console.log('Cannot open the database after 5 retries');
            vm.readAll();
          }
          setTimeout(function(){ vm.readAll() }, 100);
        }
      },
      created: function(){
        this.add()
      }
    })
  </script>
</body>

</html>
